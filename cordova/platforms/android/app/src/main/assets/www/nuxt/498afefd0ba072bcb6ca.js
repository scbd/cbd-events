(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{211:function(e,t,n){var content=n(221);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(17).default)("37cb6721",content,!1,{sourceMap:!1})},219:function(e,t,n){"use strict";n(14),n(19),n(18),n(15),n(63);var r=n(2),o=n(82),c=n.n(o),l=n(247),f=n.n(l),d=n(248),m=n.n(d);function h(){return(h=Object(r.a)(regeneratorRuntime.mark(function e(t){var data,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(data=t.data,"saveFiles"===(n=data).type){e.next=4;break}return e.abrupt("return");case 4:return this.$store.commit("routes/SET_SHOW_NAVS",!0),this.$nuxt.$loading.start(),this.$store.commit("files/DOWNLOADING"),e.next=9,_(n);case 9:return r=e.sent,o=v(n,r),e.prev=11,e.next=14,this.$store.dispatch("files/SAVE",{files:o,blobs:r});case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(11),console.error(e.t0);case 19:return this.$nuxt.$loading.finish(),e.next=22,this.$store.dispatch("files/LOAD");case 22:this.$store.commit("files/DOWNLOADING"),this.closeDialog();case 24:case"end":return e.stop()}},e,this,[[11,16]])}))).apply(this,arguments)}function v(e,t){for(var data=e.data,n=[],i=0;i<data.length;i++)n[i]=this.createFileObj(data[i],t[i]);return n}function _(e){for(var data=e.data,t=[],i=0;i<data.length;i++){var n={method:"get",url:data[i].url,responseType:"blob"};t[i]=c()(n).then(function(e){return e.data})}return Promise.all(t)}t.a={methods:{saveFiles:function(e){return h.apply(this,arguments)},getFileName:function(e){var t=f.a.basename(e),n=this.$route.params.conferenceCode,r=this.$route.params.meetingCode;return"/cbd-events/".concat(n,"/").concat(r,"/").concat(t)},createFileObj:function(e,t){return e.name=this.getFileName(e.name),e.baseName=f.a.basename(e.name),e.size=e.size||t.size||m()(t),e.lastModified=e.date,e},closeDialog:function(){this.$refs.docsFrame.contentWindow.postMessage(JSON.stringify({type:"closeDialogRemote"}),void 0)},getFileObjs:v},mounted:function(){var e=this;this.$refs.docsFrame&&(this.$store.dispatch("files/LOAD"),window.addEventListener("message",this.saveFiles),this.$refs.docsFrame.onload=function(){return e.$nuxt.$loading.finish()})},created:function(){0;this.$nuxt.$loading.start&&this.$nuxt.$loading.start()},beforeDestroy:function(){this.$refs.docsFrame&&window.removeEventListener("message",this.saveFiles)}}},220:function(e,t,n){"use strict";var r=n(211);n.n(r).a},221:function(e,t,n){(e.exports=n(16)(!1)).push([e.i,".main[data-v-1c026bc8]{background-color:#d3d3d3;height:83vh;display:flex;align-items:center;justify-content:center}",""])},222:function(e,t,n){var content=n(268);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(17).default)("3aed862c",content,!1,{sourceMap:!1})},246:function(e,t,n){"use strict";var r={name:"Offline"},o=(n(220),n(5)),component=Object(o.a)(r,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"main"},[t("div",{staticClass:"text-center"},[t("svg",{staticClass:"icon x3"},[t("use",{attrs:{"xlink:href":"#icon-wifi-off"}})]),this._v(" "),t("h3",[this._v(this._s(this.$t("serviceUnavailable")))])])])},[],!1,null,"1c026bc8",null);t.a=component.exports},267:function(e,t,n){"use strict";var r=n(222);n.n(r).a},268:function(e,t,n){(e.exports=n(16)(!1)).push([e.i,".main{padding-top:.1em}.main.not-in-session{padding-top:2em}.agenda.item{padding:1em}.label.agenda{background:#777;display:inline-block;min-width:45px}.label.agenda.CBD{background:#009b48}.label.agenda.CP{background:#a05800}.label.agenda.NP{background:#0086b7}.label{display:inline;padding:.2em .6em;font-size:75%;font-weight:700;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25em}.docs-frame{width:100%;height:90vh;border:none}",""])},330:function(e,t,n){"use strict";n.r(t);var r=n(219),o=n(246),c=n(62);function l(e){return!isNaN(new Date(e).getTime())}var f={mixins:[r.a],components:{Offline:o.a},computed:{isInSession:function(){var e=this.conference,t=e.schedule,n=t.start,r=t.end,o=c.DateTime.fromISO(n),f=c.DateTime.fromISO(r),d=c.DateTime.local().setZone(e.timezone);if(o<=d&&d<=f||l(this.$route.query.datetime))return this.$store.commit("routes/SET_SHOW_MEETING_NAV",!1),!0;return!1},forceDate:function(){return l(this.$route.query.datetime)?"&datetime=".concat(this.$route.query.datetime):""},offLine:function(){return this.$store.state.offLine.isOffLine},inSessionAgendaItems:function(){return this.isInSession?this.agenda.items:[]}},created:function(){this.isInSession||this.$store.commit("routes/SET_SHOW_MEETING_NAV",{agendasOnly:!0})},asyncData:function(e){var t=e.store,n=e.params,r=e.query;!function(e,t){var n=t.datetime,r=e.state.conferences.selected,o=c.DateTime.fromISO(r.schedule.start),f=c.DateTime.fromISO(r.schedule.start),d=c.DateTime.local().setZone(r.timezone);if(console.log(r),o<=d&&d<=f||l(n))return e.commit("routes/SET_SHOW_MEETING_NAV",!1),!0;return!1}(t,r)?t.commit("routes/SET_SHOW_MEETING_NAV",{gendasOnly:!0}):t.commit("routes/SET_SHOW_MEETING_NAV",!1);return{conferenceCode:n.conferenceCode,iFrameHost:void 0,conference:t.state.conferences.selected,agenda:t.state.conferences.selectedMeeting.agenda}}},d=(n(267),n(5)),component=Object(d.a)(f,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main",class:{"not-in-session":!e.isInSession}},[e.isInSession?e._e():n("h4",{staticClass:"text-center"},[e._v("\n    Provisional Agenda\n  ")]),e._v(" "),n("hr"),e._v(" "),e._l(e.inSessionAgendaItems,function(t,r){var o;return n("section",{key:r},[n("div",{staticClass:"agenda item "},[n("span",{staticClass:"label agenda",class:(o={},o[e.agenda.prefix]=e.agenda.prefix,o)},[e._v("\n        "+e._s(e.agenda.prefix)+" "+e._s(t.item)+"\n      ")]),e._v(" "),n("span",[e._v(e._s(t.shortTitle||t.title))])]),e._v(" "),n("hr")])}),e._v(" "),e.isInSession&&e.offLine?n("Offline"):e._e(),e._v(" "),e.isInSession&&!e.offLine?n("iframe",{ref:"docsFrame",staticClass:"docs-frame",attrs:{src:e.iFrameHost+"/conferences/"+e.conferenceCode+"/schedules?viewOnly=true&"+e.forceDate}}):e._e()],2)},[],!1,null,null,null);t.default=component.exports}}]);